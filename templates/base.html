<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ShopUz{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f1f5f9;
            --accent: #f59e0b;
            --dark: #0f172a;
            --text-muted: #64748b;
        }
        body { background: #f8fafc; font-family: 'Segoe UI', sans-serif; color: var(--dark); }

        /* NAVBAR */
        .navbar { background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.08); padding: 12px 0; }
        .navbar-brand { font-weight: 800; font-size: 1.4rem; color: var(--primary) !important; letter-spacing: -0.5px; }
        .navbar-brand span { color: var(--accent); }
        .nav-link { font-weight: 500; color: #475569 !important; transition: color 0.2s; }
        .nav-link:hover { color: var(--primary) !important; }
        .nav-search .form-control { border-radius: 50px; border: 2px solid #e2e8f0; padding: 8px 18px; }
        .nav-search .form-control:focus { border-color: var(--primary); box-shadow: none; }
        .nav-search .btn { border-radius: 50px; background: var(--primary); border: none; }
        .cart-badge { background: var(--accent); color: white; font-size: 10px; padding: 2px 6px; border-radius: 50px; }
        .avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); }
        .dropdown-menu { border: none; box-shadow: 0 8px 30px rgba(0,0,0,0.12); border-radius: 12px; }

        /* CARDS */
        .card { border: none; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); transition: transform 0.2s, box-shadow 0.2s; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.1); }

        /* BUTTONS */
        .btn-primary { background: var(--primary); border: none; border-radius: 10px; font-weight: 600; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-outline-primary { border-color: var(--primary); color: var(--primary); border-radius: 10px; font-weight: 600; }
        .btn-outline-primary:hover { background: var(--primary); }

        /* BADGES */
        .badge-category { background: #ede9fe; color: var(--primary); font-weight: 600; border-radius: 8px; padding: 4px 10px; font-size: 12px; }
        .badge-discount { background: #fef3c7; color: #92400e; font-weight: 700; border-radius: 8px; padding: 4px 10px; font-size: 12px; }

        /* SIDEBAR */
        .sidebar { background: white; border-radius: 16px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .sidebar .nav-link { color: #475569; border-radius: 10px; padding: 10px 14px; margin-bottom: 4px; }
        .sidebar .nav-link:hover, .sidebar .nav-link.active { background: #ede9fe; color: var(--primary); }
        .sidebar .nav-link i { width: 20px; }

        /* ALERTS */
        .alert { border: none; border-radius: 12px; }
        .alert-danger { background: #fef2f2; color: #991b1b; }
        .alert-success { background: #f0fdf4; color: #166534; }

        /* FOOTER */
        footer { background: var(--dark); color: #94a3b8; margin-top: 60px; padding: 30px 0; }
        footer a { color: #94a3b8; text-decoration: none; }
        footer a:hover { color: white; }

        /* MISC */
        .section-title { font-weight: 800; font-size: 1.5rem; color: var(--dark); }
        .text-primary-custom { color: var(--primary); }
        .bg-primary-soft { background: #ede9fe; }
        .page-header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 40px 0; border-radius: 0 0 24px 24px; margin-bottom: 30px; }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand" href="{% url 'home' %}">Shop<span>Uz</span></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarMain">
            <!-- Search -->
            <form class="nav-search mx-auto d-flex" style="width:380px;" method="get" action="{% url 'home' %}">
                <input class="form-control me-2" type="search" name="q" placeholder="Mahsulot qidiring..." value="{{ request.GET.q }}">
                <button class="btn btn-primary px-3" type="submit"><i class="bi bi-search text-white"></i></button>
            </form>
            <ul class="navbar-nav ms-auto align-items-center gap-2">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}"><i class="bi bi-house-door me-1"></i>Bosh sahifa</a>
                </li>
                {% if user.is_authenticated %}
                <li class="nav-item">
                    <a class="nav-link position-relative" href="{% url 'cartview' %}">
                        <i class="bi bi-cart3 fs-5"></i>
                        <span class="cart-badge position-absolute top-0 start-100 translate-middle">5</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'wishlist' user.id %}"><i class="bi bi-heart fs-5"></i></a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center gap-2" href="#" data-bs-toggle="dropdown">
                        {% if user.profile_image %}
                            <img src="{{ user.profile_image.url }}" class="avatar" alt="">
                        {% else %}
                            <div class="avatar bg-primary-soft d-flex align-items-center justify-content-center">
                                <i class="bi bi-person-fill text-primary-custom"></i>
                            </div>
                        {% endif %}
                        {{ user.username }}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="{% url 'profile' user.id %}"><i class="bi bi-person me-2"></i>Profil</a></li>
                        <li><a class="dropdown-item" href="{% url 'order_list' %}"><i class="bi bi-box-seam me-2"></i>Buyurtmalarim</a></li>
                        <li><a class="dropdown-item" href="{% url 'product_create' %}"><i class="bi bi-plus-circle me-2"></i>Mahsulot qo'shish</a></li>
                        {% if user.is_staff %}
                        <li><a class="dropdown-item" href="/admin/"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                        {% endif %}
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="{% url 'logout' user.id %}"><i class="bi bi-box-arrow-right me-2"></i>Chiqish</a></li>
                    </ul>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="btn btn-outline-primary btn-sm me-2" href="{% url 'login' %}">Kirish</a>
                </li>
                <li class="nav-item">
                    <a class="btn btn-primary btn-sm" href="{% url 'register' %}">Ro'yxatdan o'tish</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<!-- MESSAGES -->
{% if messages %}
<div class="container mt-3">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- MAIN CONTENT -->
<main>
    {% block content %}{% endblock %}
</main>

<!-- FOOTER -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-3">
                <h5 class="text-white fw-bold">Shop<span style="color:var(--accent)">Uz</span></h5>
                <p class="small">O'zbekistondagi eng yaxshi online do'kon. Sifatli mahsulotlar, tez yetkazib berish.</p>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-white">Havolalar</h6>
                <ul class="list-unstyled small">
                    <li><a href="{% url 'home' %}">Bosh sahifa</a></li>
                    <li><a href="#">Haqimizda</a></li>
                    <li><a href="#">Aloqa</a></li>
                </ul>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-white">Bog'lanish</h6>
                <p class="small"><i class="bi bi-telephone me-2"></i>+998 90 123 45 67</p>
                <p class="small"><i class="bi bi-envelope me-2"></i>info@shopuz.uz</p>
            </div>
        </div>
        <hr style="border-color:#334155;">
        <p class="text-center small mb-0">Â© 2025 ShopUz. Barcha huquqlar himoyalangan.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
